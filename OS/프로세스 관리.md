# 프로세스 관리

### 프로세스

---

- 메모리에 올라와 실행중인 프로그램
- 디스크에 있는 프로그램은 아무일도 일어나지 않음
- 반면 프로세스는 cpu에 의해 관리받음(cpu의 시간을 나눠받음)

### 프로세스의 상태

---

- new → ready → running → terminated

                  ← waiting →

- new : 디스크 안의 파일이 메인 메모리로 올라온 상태
- ready : 초기화를 끝내고 실행할 모든 준비가 다 된 상태
- running : CPU에 의해 실행되고 있는 상태
- waiting : I/O를 만나 CPU가 다른 프로세스에 가 있는 상태, I/O가 끝나 CPU에 의해 다시 싫애되기를 기다리는 상태
- terminated : 프로세스 종료
- running → ready로 바로 가는 경우 : 시분할 시스템

### PCB

---

- 프로세스의 모든 정보들이 들어있음
- 프로세스 하나마다 하나씩 할당됨
- PCB에 들어있는 정보
    - 프로세스 상태(프로세스가 어떤 상태에 있는가)
    - PC : 현재 실행중인 메모리 주소
    - MMU(Memory Management Unit) Info
    - PID

- Job Queue
    - 하드디스크의 파일은 많고 메모리는 작음, 줄을 서서 기다려야 함
- Ready Queue
    - 메모리에도 여러 프로세스가 있기 때문에 줄을 서서 CPU를 기다려야 함
    - PCB들이 큐 안에 들어가 있음
- Device Queue
    - Print, Hard Disk를 사용하려면 또 줄을 서야 함

### Job Scheduling

---

- 디스크 안에서 메모리로 올라가려는 파일들을 Job이라고 부름
- 디스크의 어떤 파일을 먼저 메모리로 올릴까를 결정
- 먼저 온 파일을 먼저 올리는 것이 가장 쉬움, 다양한 방법이 있음
- Job Schedular 프로그램이 있음
    - Os의 프로세스 관리부서 안(잡 큐, 레디 큐 ...)에 있음
    - 롱 텀 스케줄러라고도 한다.
        - 메모리가 꽉 차 있으면 결정할 필요가 없기 때문에 더디게 일어나기 때문
        - 자주 일어나지 않고 몇 분 간격으로 일어남

### CPU Scheduling

---

- 메인 메모리에 올라와있는 프로세스 어느 것부터 실행할지 정하는 것을 CPU Scheduling이라고 함
- CPU 스케줄러도 프로그램임(OS의 프로세스 관리 부서에 있음)
- CPU 스케줄러
    - 쇼트 텀 스케줄러
    - CPU는 1초에도 수십, 수백 번 일을 하기 때문
    - 스위칭은 자주 일어남
        - I/O 발생 시
        - Time Expire
- 디바이스 스케줄러
    - 디바이스 큐에 있는 Job 중 무엇부터 서비스 받게 할지

### CPU Bound Process vs I/O Bound Process

---

- CPU Bound Process
    - 프로세스 중 cpu를 많이 사용하는 것(계산을 많이 하는 것)
- I/O Bound Process
    - 프로세스 중 입출력이 많은 프로세스(워드 프로세서)
- 두 프로세스 중 한 종류의 프로세스만 메모리에 많이 올라와 있으면 CPU나 I/O가 놀기 때문에 CPU 스케줄러는 두 프로세스를 적절히 믹스해서 잘 올리는 것이 중요함.

### Swap Out

---

- A, B, C가 서버 컴퓨터를 사용할 때 메인 메모리는 A, B, C를 위해 할당됨
- 이 때 B가 얼마간 작업을 하지 않을 경우 메인 메모리는 B를 위해 할당한 메모리에 올라와 있던 프로세스 이미지를 하드디스크로 저장하고(Swap Out), B에게 할당한 메모리를 회수한 후 적절히 활용
- 이 때 하드디스크에 저장된 프로세스 이미지는 Swap Device
- 다시 B가 작업을 하면 프로세스 이미지가 메모리로 올라옴(Swap In)

### Medium Term Scheduling

---

- OS가 메모리를 지켜보다가 어떤 프로세스를 스왑 디바이스로 밀어낼 것인가를 결정하는 것
- 쇼트 텀보다는 덜 일어나고 롱 텀보다는 자주 일어나 미디엄 텀 스케줄링이라고 함