# 디스크 스케줄링-1

- 파일에 블록을 할당하는 방법?
    - 연속 할당
        - 하드디스크의 블록에 연속적으로 파일을 할당
        - 장점
            - 헤드를 많이 움직이지 않기 때문에 속도가 빠르다
        - 단점
            - 외부 단편화로 인한 디스크 공간 낭비
    - 연결 할당
        - 시작 주소는 파일 디렉토리에, 다음 블록의 주소는 현재 블록에 저장
        - 장점
            - 외부 단편화가 줄어듬
        - 단점
            - 헤더를 많이 움직여야 하기 때문에 속도가 느림
            - Direct Access는 불가, 중간에 블록이 손실되면 그 다음 데이터부터 읽지 못함
        - 개선
            - FAT 파일 시스템
                - 포인터들만 테이블(FAT)을 별도 블록에 저장
                - FAT 손실 시 복구 위해 이중 저장
                - Direct Access도 가능

    ### 색인 할당(Indexed Allocation)

    ---

    - 파일 당 (한 개의) 인덱스 블록(인덱스 테이블) → 데이터 블록 외에
    - 인덱스 블록은 포인터의 모음
    - 파일 디렉토리는 인덱스 블록을 가리킨다.
    - Unix / Linux에서 사용
    - 순차적 읽기(Sequential Access) 가능
    - 장점
        - Direct Access 가능
        - 외부 단편화 없음
    - 단점
        - 인덱스 블록 할당에 따른 저장공간 손실
            - 예) 1바이트 파일 위해 데이터 1블록  + 인덱스 1블록, 내부 단편화가 큼
        - 파일의 최대 크기
            - 예제 : 1블록 =  512 Byte = 4 Byte(인덱스 테이블 엔트리의 크기, 보통 Integer 값으로 4바이트 ) X 128개의 인덱스
                - 128 X 512 Byte = 64KB
            - 예제 : 1블록 = 1KB = 4 Byte X 256개의 인덱스
                - 256 X 1KB = 256KB
            - 해결 방법
                - Linked : 인덱스 블록이 다른 인덱스 블록을 가리킴
                - Multilevel Index : 인덱스 블록의 각 엔트리가 다른 인덱스 테이블들을 가리킴
                - Combined : Linked + Multilvel Index, 인덱스 블록의 모든 엔트리가 아닌 일부 엔트리만 Multilevel Index

    ### *이외에도 파일 할당 방법은 여러가지가 있음*

    ### 디스크 스케줄링

    ---

    - 디스크 접근 시간
        - Seek Time(헤더를 움직여 해당 트랙으로 가는 시간) + rotatinoal delay(원판이 얼마나 빨리 도는가) + transfer time(트랙이 헤더에 읽히는 시간)
        - 탐색시간(Seek time)이 가장 크다.
    - 다중 프로그래밍 환경
        - 메모리안에 여러 OS외에도 여러 개의 프로세스가 올라가 있음
        - 여러 개의 프로세스가 디스크를 읽으려고 함
        - 디스크 큐에는 많은 요청들이 쌓여있다.
        - 요청들을 어떻게 처리하면 탐색시간을 줄일 수 있을까?
        - 디스크 헤더를 어떻게 하면 가장 적게 움직일 수 있을까?
    - 디스크 스케줄링 알고리즘
        - FCFS(First Come First Served)
            - Simple and fair
            - 효율적일까?
        - SSTF(Shortest-Seek-Time-First) Scheduling
            - 디스크 헤더가 가장 짧게 움직이게 스케줄링
            - FCFS 보다는 나음, 모든 경우에 나을까?