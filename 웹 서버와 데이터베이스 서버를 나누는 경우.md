# 웹 서버와 데이터베이스 서버를 나누는 경우

### 서버의 능력치를 10이라고 가정하자
- 초기 서비스 운영시에는 웹 서버는 1, 데이터베이스 서버는 1의 능력치를 필요로 한다. 따라서, 두 서버가 하나의 서버 공간을 사용해도 아무 지장이 없다.
- 그런데 서비스의 사용자가 늘어나, 서비스의 부하량이 증가해 웹 서버가 7, 데이터베이스 서버가 6의 능력치를 필요로 한다면 현재 서버로 버틸 수 없으며, 웹과 데이터베이스의 서버를 나눠야 할 것이다.

### 웹 서버와 데이터베이스 서버를 분리하면 어떤 효과가 있을까?
- 당연히 서버 부하량이 분산된다.
- 다만 분리를 하게 되면 웹 서버와 데이터베이스 서버가 추가적으로 네트워크 통신을 해야하기 때문에 인증시간 및 네트워크 지연(Network Latency) 시간이 발생한다.
- 네트워크 지연시간은 물리적 거리에 영향을 받기 때문에, 두 서버는 물리적으로 가깝게 위치해야 할 것이다.

### 웹 서버와 데이터베이스 서버를 나눠야 할 경우
- `Load balancer` 등으로 부하분산 환경을 구축하고자 할 때
    - 웹 서버를 여러 개 두고 로드 밸런싱을 한다면, 여러 웹서버가 데이터베이스에 접근하기 위해 데이터베이스 서버는 분리되어야 할 것이다.
- 장애대응 서버
    - `서버 자동 복제(Auto Scailing)`이나, `장애 극복(Fail Over)`등의 환경을 구축하려면 먼저 각 서버들의 역할이 명확히 구분되어야 한다.

*대부분의 경우 웹서버와 데이터베이스 서버를 분리하지 않는 것이 더 쉽고, 싸고, 빠르다. 운영예산에 맞춰 구축하도록 하자*

### 참고
- https://blog.lael.be/post/1866